{% extends 'invoice/index.html' %}

{% block title %}Invoice List{% endblock %}

{% block extra_styles %}
<style>
    .header {
        padding: 10px;
        text-align: right;
        background-color: #d1dbf9;
        border-radius: 10px;
        padding: 10px;
        margin-bottom: 8px;
        display: flex;
    }
    .page_title {
        display: flex;
        text-align: left;
        color: #6C63FF;
        align-items: center;
    }
    .page_title,
    .search-bar {
        padding: 5px;
        flex: 1;
    }
    .search-bar {
        margin-bottom: 4px;
        position: relative;
        padding: 8px 30px 8px 10px;
        border-radius: 4px;
        outline: none;
    }
    .search-bar h1 {
        text-align: left;
    }
    .search-bar input {
        border-radius: 5px;
        height: 35px;
        width: 200px;
    }
    .card {
            background-color: #F9FAFB;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        .table th, .table td {
            padding: 10px;
            text-align: left;
        }
        .table th {
            background-color: #E0E7FF;
            color: #6C63FF;
        }
        .table tr:nth-child(even) {
            background-color: #F9FAFB;
        }
        .btn {
            height: 32px;
        }
</style>
{% endblock %}

{% load humanize %}
{% block content %}
<div class="header">
    <div class="page_title">
        <h1>Invoice List</h1>
    </div>
    <div class="search-bar">
        <input type="text" placeholder="Search..." >
    </div>
</div>
<div class="card">
    <table class="table">
        <thead>
            <tr>
                <th>#</th>
                <th>Client</th>
                <th>Address</th>
                <th>Invoice Date</th>
                <th>Due Date</th>
                <th>Amount Due</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for invoice in invoice %}
            <tr>
                <td>{{ invoice.id }}</td>
                <td>{{ invoice.client_name }}</td>
                <td>{{ invoice.billing_address }}</td>
                <td>{{ invoice.created_at|date:"DATE_FORMAT" }}</td>
                <td>{{ invoice.due_date|date:"DATE_FORMAT" }}</td>
                <td>{{ invoice.total_cost | floatformat:2|intcomma }}</td>
                <td>{{ invoice.paid|yesno:"Paid,Unpaid"  }}</td>
                <td>
                    <a href="{% url 'invoicing_app:invoice_detail' invoice.id %}" class="btn btn-primary btn-sm"><span data-feather="eye"></span>View</a>
                    <a href="{% url 'invoicing_app:edit_invoice' invoice.id %}" class="btn btn-secondary btn-sm"><span data-feather="edit"></span>Edit</a>
                    <form action="{% url 'invoicing_app:delete_invoice' invoice.id %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-sm" onclick="return confirm('Are you sure you want to delete this invoice?');"><span data-feather="trash-2"></span>Delete</button>
                    </form>
                    <div class="btn-group">
                        <button type="button" class="btn btn-info btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Status
                        </button>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="{% url 'invoicing_app:mark_as_paid' invoice.id %}">Mark as Paid</a>
                            <a class="dropdown-item" href="{% url 'invoicing_app:mark_as_unpaid' invoice.id %}">Mark as Unpaid</a>
                        </div>
                    </div>
                </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}